<!DOCTYPE html>
<html xmlns:th="http://thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>chatMain</title>
  <!----======== CSS ======== -->
  <link rel="stylesheet" type="text/css" th:href="@{../css/openchat.css}">
  <link rel="stylesheet" th:href="@{../css/sidebar.css}">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <link href='https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css' rel='stylesheet'>
  <!-- ======== JS ======== -->
  <script th:src="@{/js/jQuery-3.7.0.js}"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.5.2/sockjs.min.js"></script>
  <script th:src="@{/js/chat/openChatRoom.js}"></script>
</head>
<body>
  	<input type="hidden" id="chatroom" th:value="${chatroom}">
	<input type="hidden" id="myChatroomLink" th:value="${myChatroomLink}">
	<input type="hidden" id="chatLinks" th:value="${chatLinks}">

	<div class="sidebar-container" style="position: relative;">
		<nav class="sidebar close">
			<header>
				<div class="image-text">
					<span class="image"> <img th:src="@{../img/sidebar.png}"
						alt="">
					</span>

					<div class="text logo-text">
						<span class="name">LingoSwap</span>
					</div>
				</div>
				<i class='bx bx-chevron-right toggle'></i>
			</header>

			<div class="menu-bar">
				<div class="menu">
					<ul class="menu-ul">
						<li><a th:href="@{/member/home}"> <i
								class='bx bx-home-alt icon'></i> <span class="text nav-text">Hoooome</span>
						</a></li>

						<li><a th:href="@{/feed/feedMain}"> <i
								class='bx bx-detail icon'></i> <span class="text nav-text">Feed</span>
						</a></li>

						<li><a th:href="@{/note/noteMain}"> <i
								class='bx bx-edit icon'></i> <span class="text nav-text">Note</span>
						</a></li>

						<li><a th:href="@{/message/messageMain}"> <i
								class='bx bx-message-square-dots icon'></i> <span
								class="text nav-text">Message</span>
						</a></li>

						<li><a th:href="@{/game/gameMain}"> <i
								class='bx bx-game icon'></i> <span class="text nav-text">Game</span>
						</a></li>

						<li><a th:href="@{/live/liveMain}"> <i
								class='bx bx-tv icon'></i> <span class="text nav-text">Live</span>
						</a></li>

					</ul>
				</div>
				<!-- ========================사이드바 하단=========================== -->
				<div class="bottom-content">
					<ul class="menu-ul">
						<li class="">
							<div sec:authorize="isAuthenticated()">
								<a th:href="@{/member/logout}"> <i
									class='bx bx-log-out icon'></i> <span class="text nav-text">Logout</span>
								</a>
							</div>
						</li>

						<li class=""><a th:href="@{/notification/notificationMain}">
								<i class='bx bx-bell icon'></i> <span class="text nav-text">Notifications</span>
						</a></li>
						<li class=""><a th:href="@{/store/storeMain}"> <i
								class='bx bx-shopping-bag icon'></i> <span class="text nav-text">Store</span>
						</a></li>
						<li class="">
							<div sec:authorize="isAuthenticated()">
								<a th:href="@{/member/myPage}"> <span class="profile-pic-li"
									data-tooltip="프로필 사진으로 이동합니다."> <span
										class="profile-pic"> <img th:src="@{../img/2.jpg}"
											alt="Your Profile Picture">
									</span>
								</span> <span class="text nav-text">Profile</span>
								</a>
							</div>
						</li>
						<li class="mode">
							<div class="sun-moon">
								<i class='bx bx-moon icon moon'></i> <i
									class='bx bx-sun icon sun'></i>
							</div> <span class="mode-text text">Dark mode</span>
							<div class="toggle-switch">
								<span class="switch"></span>
							</div>
						</li>
					</ul>
				</div>
			</div>
		</nav>
	</div>
  <div class="container">
    <div class="leftside">
      <!--header-->
      <div class="header">
        <!-- DM/오픈채팅방 버튼 -->
        <div></div>
        <button type="button" class="btn btn-primary" style="background-color: #a8e9dc; border-color: #a8e9dc; color: #1f2e3d; font-size: 18px; font-weight: 500; box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.1);">DM</button>
        <button type="button" class="btn btn-primary" style="background-color: #f4faf9; border-color: #a8e9dc; color: #1f2e3d; font-size: 18px; font-weight: 500; box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.1);">Open Chat</button>
        <div></div>
      </div>
      <div class="">
        <!--search-->
        <div class="search_chat">
          <div>
            <input type="text" placeholder="Search or start new chat">
            <ion-icon name="search-outline"></ion-icon>
          </div>
        </div>
        <!-- chat list--> 
        <div class="chatlist">
          <div class="block">
            <!--채팅목록 프로필사진-->
            <div class="imgbx">
              <!-- <img src="../img/img1.jpg" class="cover"> -->
            </div>
            <div class="details">
              <div class="listHead">
                <h4>english speaking study</h4>
                <p class="time">10:56</p>
              </div>
              <div class="message_p">
                <p>안녕하세요!</p>
                <b>1</b>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!--채팅 화면-->
    <div class="rightside">
      <div class="header">
        <div class="toggle">
          <ion-icon name="menu-outline"></ion-icon>
        </div>
      </div>
	  <!-- chatbox -->
      <ul class="chatbox">
        <li class="msg_content">
		  <div th:each="msg, i : ${messages}" id="msg_chatBoxArea">
		  
		  	<div th:switch="${msg.user_num}">
		  		<div th:case="${myChatroomLink.user_num}" class="chat outcoming"><p th:text="${msg.message}"></p></div>
		  		<div th:case="*" class="chat incoming"><p th:text="${msg.message}"></p></div>
		  	</div>
		  	
		  	<!-- 
		  	<div th:if="${msg.user_num == myChatroomLink.user_num}" class="chat outcoming">
		  		<p th:text="${msg.message}"></p>
		  	</div>
		  	
		  	<div th:if="${msg.user_num != myChatroomLink.user_num}" class="chat incoming">
		  		<p th:text="${msg.message}"></p>
		  	</div>
		  	-->
          </div>
        </li>
      </ul>
        <!-- chat input -->
        <div class="chatbox_input">
          <ion-icon name="happy-outline"></ion-icon>
          <ion-icon name="attach-outline"></ion-icon>
          <ion-icon name="mic"></ion-icon>
          <input type="text" id="msg_input" class="msg_input" placeholder="메세지를 입력하세요">
          <button type="submit" id="msg_submit" class="btn btn-primary">Send</button>
        </div>
      </div>
    <!-- 참가자 목록 -->
    <div class="participants_list_box">
      <div class="header">
      </div>
      <div class="participants_list">
        <p>참가자 목록</p>
        <div class="participants">
        </div>
      </div>
      <div class="voice_participation">
        <button type="button" id="voice_request" class="btn btn-primary">보이스 참가신청</button>
      </div>
    </div>
  </div>
  <script th:src="@{/js/jquery-3.7.0.js}"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
<script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
</body>
</html>